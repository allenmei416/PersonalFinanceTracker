@model PersonalFinanceTracker.Web.Models.DashboardViewModel

<div class="container-fluid mt-4">

    <!-- First Row -->
    <div class="row mb-4">
        <!-- Summary Box -->
        <div class="col-md-4">
            @await Html.PartialAsync("_SummaryBox", Model)
        </div>

        <!-- Transactions Table -->
        <div class="col-md-8">
            @await Html.PartialAsync("_TransactionTable", Model)
        </div>
    </div>

    <!-- Second Row -->
    <div class="row">
        @await Html.PartialAsync("_DashboardBoxes", Model)
    </div>
</div>

<!-- Modals -->
@await Html.PartialAsync("_AddTransactionModal", Model)
@await Html.PartialAsync("_EditTransactionModal", Model)


@if (ViewBag.ShowModal != null && (bool)ViewBag.ShowModal)
{
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var modal = new bootstrap.Modal(document.getElementById('addTransactionModal'));
            modal.show();

            var errorMessage = '@ViewBag.ErrorMessage';
            if (errorMessage) {
                var msgBox = document.getElementById('modalErrorMessage');
                msgBox.textContent = errorMessage;
                msgBox.classList.remove('d-none');
            }
        });
    </script>
}
